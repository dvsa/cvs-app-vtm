<section>
  <app-accordion-control>
    <ng-container *ngFor="let section of sectionTemplates" [ngSwitch]="section.name">
      <app-accordion [id]="section.name" [title]="section.label">
        <app-body
          *ngSwitchCase="'bodySection'"
          [vehicleTechRecord]="vehicleTechRecordCalculated"
          [isEditing]="isEditing"
          (formChange)="handleFormState($event)"
        ></app-body>

        <app-dimensions
          *ngSwitchCase="'dimensionsSection'"
          [vehicleTechRecord]="vehicleTechRecordCalculated"
          [isEditing]="isEditing"
          (formChange)="handleFormState($event)"
        ></app-dimensions>

        <app-hgv-trl-brakes
          *ngSwitchCase="'hgvAndTrlBrakesSection'"
          [vehicleTechRecord]="vehicleTechRecordCalculated"
          [isEditing]="isEditing"
          (formChange)="handleFormState($event)"
        ></app-hgv-trl-brakes>

        <app-psv-brakes
          *ngSwitchCase="'psvBrakesSection'"
          [vehicleTechRecord]="vehicleTechRecordCalculated"
          [isEditing]="isEditing"
          (formChange)="handleFormState($event)"
        ></app-psv-brakes>

        <app-tyres
          *ngSwitchCase="'tyreSection'"
          [vehicleTechRecord]="vehicleTechRecordCalculated"
          [isEditing]="isEditing"
          (formChange)="handleFormState($event)"
        ></app-tyres>

        <app-weights
          *ngSwitchCase="'weightsSection'"
          [vehicleTechRecord]="vehicleTechRecordCalculated"
          [isEditing]="isEditing"
          (formChange)="handleFormState($event)"
        ></app-weights>

        <app-dynamic-form-group
          *ngSwitchDefault
          [data]="vehicleTechRecordCalculated"
          [template]="section"
          [edit]="isEditing"
          (formChange)="handleFormState($event)"
        ></app-dynamic-form-group>
      </app-accordion>
    </ng-container>
  </app-accordion-control>
</section>
