<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    <app-tech-record-title
      [vehicleTechRecord]="vehicleTechRecord"
      [recordActions]="(currentTechRecord$ | async)?.statusCode === statusCodes.PROVISIONAL ? TechRecordActions.PROVISIONAL : TechRecordActions.CURRENT"
    ></app-tech-record-title>

    <app-edit-tech-record-button
      [vehicleTechRecord]="vehicleTechRecord"
      [viewableTechRecord]="(currentTechRecord$ | async) || undefined"
      [(isEditing)]="isEditing"
      [isDirty]="isDirty"
      (submitChange)="handleSubmit()"
      *appRoleRequired="roles.TechRecordAmend"
    ></app-edit-tech-record-button>

    <app-tech-record-summary
      *ngIf="currentTechRecord$ | async as currentTechRecord"
      [isEditing]="isEditing"
      [vehicleTechRecord]="currentTechRecord"
      (formChange)="handleFormState()"
    ></app-tech-record-summary>

    <app-tech-record-history
      [currentRecord]="(currentTechRecord$ | async) || undefined"
      [vehicleTechRecord]="vehicleTechRecord"
    ></app-tech-record-history>

    <app-test-record-summary
      *appRoleRequired="roles.TestResultView"
      [testRecords]="(records$ | async) || []"
      [currentTechRecord]="(currentTechRecord$ | async) || undefined"
    >
    </app-test-record-summary>
  </div>
</div>
