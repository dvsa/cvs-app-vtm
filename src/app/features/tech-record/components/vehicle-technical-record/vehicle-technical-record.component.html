<div class="govuk-grid-row">
  <div class="govuk-grid-column-one-third">
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-full">
        <app-tech-record-title
          [vehicleTechRecord]="vehicleTechRecord"
          [recordActions]="getActions((currentTechRecord$ | async) || undefined)"
        ></app-tech-record-title>

        <app-edit-tech-record-button
          [vehicleTechRecord]="vehicleTechRecord"
          [viewableTechRecord]="(currentTechRecord$ | async) || undefined"
          [(isEditing)]="isEditing"
          [isDirty]="isDirty"
          (submitChange)="handleSubmit()"
          *appRoleRequired="roles.TechRecordAmend"
        ></app-edit-tech-record-button>

        <app-tech-record-history
          [currentRecord]="(currentTechRecord$ | async) || undefined"
          [vehicleTechRecord]="vehicleTechRecord"
        ></app-tech-record-history>

        <app-test-record-summary *appRoleRequired="roles.TestResultView" [testRecords]="(records$ | async) || []"> </app-test-record-summary>

        <ng-container *ngIf="!isArchived && !isEditing">
          <app-test-record-create-button *appRoleRequired="[roles.TestResultCreateContingency, roles.TestResultCreateDeskAssesment]">
          </app-test-record-create-button>
        </ng-container>
      </div>
    </div>
  </div>
  <div class="govuk-grid-column-two-thirds">
    <app-tech-record-summary
      *ngIf="currentTechRecord$ | async as currentTechRecord"
      [isEditing]="isEditing"
      [vehicleTechRecord]="currentTechRecord"
      (formChange)="handleFormState()"
    ></app-tech-record-summary>
  </div>
</div>
