<h1 class="govuk-heading-l title">Add batch of trailers</h1>
<form [formGroup]="form">
  <app-number-input formControlName="numberOfVehicles" label="Number of vehicles" [width]="width.XS"></app-number-input>
  <ng-container formArrayName="vehicles">
    <div class="flex flex--wrap flex_gap--7 justify--flex-start">
      <ng-container *ngFor="let group of vehicles.controls; let i = index" [formGroupName]="i">
        <fieldset class="govuk-fieldset">
          <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">
            <h2 class="govuk-fieldset__heading">{{ 'Vehicle ' + (i + 1) }}</h2>
          </legend>
          <app-text-input formControlName="vin" name="input-vin{{ i }}" label="VIN" [width]="width.L">
            <ng-container *ngIf="getVin(group)?.status === 'VALID' || getVin(group)?.status === 'PENDING'">
              <ng-template appSuffix>
                <app-input-spinner [isValid]="getVin(group)?.status || 'PENDING'"></app-input-spinner>
              </ng-template>
            </ng-container>
          </app-text-input>
          <app-text-input
            *ngIf="generateNumber$ | async"
            formControlName="trailerId"
            name="trailerId{{ i }}"
            label="Trailer id"
            [width]="width.L"
          ></app-text-input>
        </fieldset>
      </ng-container>
    </div>
  </ng-container>
</form>

<app-button-group>
  <app-button id="add-vehicles" (clicked)="handleSubmit()">Add vehicles</app-button>
  <app-button id="back" design="link" (clicked)="back()">Back</app-button>
</app-button-group>
