<app-button-group>
  <app-button *ngIf="(isEditing$ | async) === false; else editing" id="edit-test-result" (clicked)="handleEdit()">Edit</app-button>

  <ng-template #editing>
    <app-button id="save-test-result" (clicked)="handleSave()">Submit</app-button>
    <app-button id="cancel-edit-test-result" type="secondary" (clicked)="handleCancel()">Cancel</app-button>
  </ng-template>
</app-button-group>

<section *ngIf="testResult$ | async as testResult">
  <app-base-test-record [edit]="(isEditing$ | async) || false" [testResult]="testResult"></app-base-test-record>

  <app-defects
    *ngIf="defects$ | async as defects"
    class="section"
    [isEditing]="(isEditing$ | async) || false"
    [defects]="defects"
    (formsChange)="defectFormsChange($event)"
  ></app-defects>

  <app-test-amendment-history class="section" [testRecord]="testResult"></app-test-amendment-history>
</section>
