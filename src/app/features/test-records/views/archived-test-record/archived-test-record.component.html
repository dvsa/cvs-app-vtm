<section *ngIf="testResult$ | async as testResult">
  <div class="govuk-notification-banner" role="region" aria-labelledby="govuk-notification-banner-title" data-module="govuk-notification-banner">
    <div class="govuk-notification-banner__header">
      <h2 class="govuk-notification-banner__title" id="govuk-notification-banner-title">Important</h2>
    </div>
    <div class="govuk-notification-banner__content">
      <p class="govuk-notification-banner__heading">Amended Test Record - created at {{ testResult.createdAt | date: 'dd/MM/yyyy HH:mm' }}</p>
    </div>
  </div>

  <app-dynamic-form-group [template]="template" [data]="testResult"></app-dynamic-form-group>

  <section class="section">
    <h2 class="govuk-heading-m">Defects</h2>

    <ng-container *ngIf="defectData$ | async as defectData; else noDefects">
      <app-dynamic-form-group *ngIf="defectData.length > 0; else noDefects" [template]="defectTpl" [data]="defectData$ | async"></app-dynamic-form-group>
    </ng-container>

    <ng-template #noDefects>
      <p>No defects</p>
    </ng-template>
  </section>
</section>
